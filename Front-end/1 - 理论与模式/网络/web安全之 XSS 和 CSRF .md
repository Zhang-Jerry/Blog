XSS 和 CSRF 是 web 安全领域，最常见的攻击方式。

## 1. XSS（Cross Site Script）跨站脚本攻击
> `XSS`攻击是指攻击者在网页上注入攻击脚本，从而获取用户的隐私数据（如：cookie、session等）。本质是恶意代码未经过滤，与网站正常的代码混在一起；浏览器无法分辨哪些脚本是可信的，导致恶意脚本被执行。
### 如何攻击
`XSS`攻击主要分为三种：存储型、反射型、DOM型

#### 存储型
攻击步骤：    
1. 攻击者将恶意代码提交到目标网站的数据库中；
2. 用户打开目标网站时，服务端从数据库中取出恶意代码，拼接在`HTML`中返回给浏览器；
3. 浏览器接收到含有恶意代码的`HTML`并执行；
4. 恶意代码窃取用户数据并发送给攻击者，或者冒充用户调用目标网站的接口，对目标网站执行指定的攻击。

这种攻击常见于带有用户保存数据的网站，这样攻击者才有机会将恶意代码提交到数据库，如论坛发帖、商品评论、用户私信等。

#### 反射型
攻击步骤：    
1. 攻击者构造出带有恶意代码的`URL`；
2. 用户打开带有恶意代码的`URL`时，服务端从`URL`中取出恶意代码，拼接在`HTML`中返回给浏览器；
3. 浏览器接收到含有恶意代码的`HTML`并执行；
4. 恶意代码窃取用户数据并发送给攻击者，或者冒充用户调用目标网站的接口，对目标网站执行指定的攻击。

这种攻击常见于通过`URL`传递参数的功能，如网站搜索、跳转等。   
与存储型的区别在于：存储型的恶意代码在数据库中，而反射型的恶意代码在`URL`中。

#### DOM型
攻击步骤：    
1. 攻击者构造出带有恶意代码的`URL`；
2. 用户打开带有恶意代码的`URL`时，浏览器从`URL`中取出恶意代码，并执行；
3. 恶意代码窃取用户数据并发送给攻击者，或者冒充用户调用目标网站的接口，对目标网站执行指定的攻击。

这种攻击也是常见于通过`URL`传递参数的功能，如网站搜索、跳转等。   
与存储型、反射型的区别在于：`DOM`型攻击是由浏览器取出恶意代码而非服务端取出，所以属于前端自身的安全漏洞，而另外两种属于服务端安全漏洞。

### 如何防范
1. 服务端输入过滤
  由于攻击者可以通过直接构造请求，绕过前端过滤，所以，输入过滤通常放在服务端进行。
2. 防止劫持cookie
  服务端在响应报文的 Set-Cookie 字段中，添加 HttpOnly ，可禁止 js 获取cookie，从而阻止恶意代码劫持cookie。

## 2. CSRF（Cross Site Request Forgery）跨站请求伪造
> 攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

### 如何攻击
攻击步骤：    
1. 用户登录`a.com`，并保留了登录凭证（`cookie`）；
2. 攻击者引诱用户访问`b.com`；
3. `b.com`向`a.com`服务器发送一个请求：`a.com/act=xx`，浏览器会默认携带`a.com`的`cookie`；
4. `a.com`服务端收到请求后，通过`cookie`验证，误以为用户身份有效；
5. 攻击者冒用用户身份，成功的在目标网站执行了恶意代码。

### 如何防范
通过上述步骤可以发现`CSRF`的特点：    
1. 攻击发生在第三方域名；
2. 攻击者没有获取用户的`cookie`信息，而只是冒用。

针对这两个特点，可以制定防范措施：    
1. 阻止不明域名的访问：同源检查；
2. 提交请求时附加本域名下才能获得的信息：token验证。

## 3. 其它常网络安全
### 网络劫持攻击
攻击方式：攻击者利用代理服务器、路由器等中间件，截取http请求中的用户信息。    
防范措施：Http请求加密。

### 控制台注入代码
攻击方式：诱导用户在控制台输入相关代码，从而获取用户cookie等信息。    
防范措施：控制台友好提示用户不要在此操作。