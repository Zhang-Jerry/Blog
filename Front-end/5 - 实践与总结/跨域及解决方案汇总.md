## 一、什么是跨域

> 跨域是指，由于浏览器的同源策略限制，将会阻止一个域的脚本与另一个域的内容及进行交互。      

同源是指协议、域名、端口均相等，同源策略是浏览器安全机制的基础。常见的同源限制包括：

* 无法读取非同源网页的 cookie、localStorage、sessionStorage、indexedDB；
* 无法获取非同源网页的 DOM；
* 无法向非同源地址发送 Ajax 请求。

## 二、如何跨域

常用方案：

1. jsonp
2. document.domain + iframe
3. location.hash + iframe
4. window.name + iframe
5. postMessage
6. CORS
7. WebSocket
8. nginx代理
9. nodejs中间件代理

### 1. jsonp

浏览器允许三个标签跨域加载资源，分别是：link、script、img。基于此特性，可以通过动态创建 script 标签，加载一个带有回调函数名称的地址，实现跨域通信。

(1) 原生实现

        var script = document.createElement('script');

        script.src = 'http://www.xxx.com:8080/login?user=admin&callback=handleCallback';
        document.body.appendChild(script);

        // 回调执行函数
        function handleCallback(res) {
            alert(JSON.stringify(res));
        }

服务端返回数据如下：

        handleCallback({"status": true, "user": "admin"})

前端获取服务端返回的数据，即可执行预先定义的回调函数，拿到参数中的数据。

(2) jquery ajax     

        $.ajax({
            url:'http://www.xxx.com/login',
            type:'GET',
            dataType:'jsonp',//请求方式为jsonp
            jsonpCallback:'callback',
            data:{
                "username":"Nealyang"
            }
        })

jsonp 缺陷：仅支持 get 请求 （为什么？？？？？？？？？？？？）

### 2. document.domain + iframe
